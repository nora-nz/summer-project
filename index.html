<!DOCTYPE html>
<html lang="en">
    <head>
        <style> body { margin: 0; } </style>
      
        <script src="https://unpkg.com/3d-force-graph"></script>
        <script src="https://unpkg.com/d3-force-cluster-3d"></script>
        <script src="https://unpkg.com/d3-dsv"></script>
        <script src="https://unpkg.com/d3-octree"></script>
        <script src="https://unpkg.com/d3-force-3d"></script>
        <script src="https://unpkg.com/three"></script>
        <script src="https://unpkg.com/three-spritetext"></script>
      <!--  <script src="../../dist/3d-force-graph.js"></script>-->
        <script src="3dmap.js"></script>
      </head>
      <body>
        <div id="3d-graph"></div>
        <script>
            const elem = document.getElementById('3d-graph');
            
            const Graph = ForceGraph3D()(elem)
                .graphData(gData)
                .nodeAutoColorBy('group')
                .nodeVisibility(node => node.name !== "")
                .nodeRelSize(6)
                .linkColor("value")
                // .linkThreeObjectExtend(true)
                // .linkThreeObject(link => {
                //     const sprite = new SpriteText(`${link.source}`);
                //         sprite.color = "value";
                //         sprite.textHeight = 15;
                //         return sprite;
                // })
                // .linkPositionUpdate((sprite, { start, end }) => {
                //     const middlePos = Object.assign(...['x', 'y', 'z'].map(c => ({
                //     [c]: start[c] + (end[c] - start[c]) / 2 // calc middle point
                //     })));
                //     Object.assign(sprite.position, middlePos);
                // })
                .linkDirectionalArrowLength(15)
                .linkDirectionalArrowRelPos(1)
                .linkWidth(2)
                .linkOpacity(1);                

            const linkForce = Graph
                .d3Force('link')
                .distance(100);

        </script>
      </body>
</html>